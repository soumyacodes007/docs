---
title: "Referral Operations"
description: "API reference for referral tracking and reward distribution"
---

# Referral Operations

Methods for tracking referrals and distributing rewards.

## recordAction

Records a user action that triggers referral rewards (partner-only method).

```typescript
async recordAction(userAddress: Address, actionValue: bigint): Promise<Hex>
```

### Parameters

| Name | Type | Description |
|------|------|-------------|
| userAddress | `Address` | Address of the user performing the action |
| actionValue | `bigint` | Value of the action in wei (e.g., 100 * 10^18 for 1 cUSD) |

### Returns

`Hex` - Transaction hash of the action recording.

### Example

```typescript
// Record an action worth 1 cUSD
const actionValue = 1000000000000000000n; // 1 cUSD in wei
const txHash = await sdk.recordAction('0x1234...', actionValue);
console.log('Action recorded:', txHash);
```

### Requirements

- Only authorized partners can call this method
- The caller must be registered as a partner with a valid subscription

## getRewardRates

Gets the reward rates for a user based on their badge tier.

```typescript
async getRewardRates(userAddress: Address): Promise<RewardRates>
```

### Parameters

| Name | Type | Description |
|------|------|-------------|
| userAddress | `Address` | Address of the user |

### Returns

[RewardRates](/api-reference/typescript-types#rewardrates) object containing reward percentages in basis points.

### Example

```typescript
const rates = await sdk.getRewardRates('0x1234...');
console.log('Level 1 rate (bps):', rates.level1Bps);
console.log('Level 2 rate (bps):', rates.level2Bps);
```

## bpsToPercentage

Converts basis points to percentage.

```typescript
bpsToPercentage(bps: bigint): number
```

### Parameters

| Name | Type | Description |
|------|------|-------------|
| bps | `bigint` | Value in basis points |

### Returns

`number` - Percentage value.

### Example

```typescript
const percentage = sdk.bpsToPercentage(500n); // 500 basis points = 5%
console.log('Percentage:', percentage);
```

## getCUSDBalance

Gets the cUSD balance of an address.

```typescript
async getCUSDBalance(address: Address): Promise<bigint>
```

### Parameters

| Name | Type | Description |
|------|------|-------------|
| address | `Address` | Address to check balance for |

### Returns

`bigint` - Balance in wei.

### Example

```typescript
const balance = await sdk.getCUSDBalance('0x1234...');
console.log('cUSD balance:', balance);
```

## approveCUSDCustom

Approves a custom amount of cUSD for spending.

```typescript
async approveCUSDCustom(amount: bigint): Promise<Hex>
```

### Parameters

| Name | Type | Description |
|------|------|-------------|
| amount | `bigint` | Amount to approve in wei |

### Returns

`Hex` - Transaction hash of the approval.

### Example

```typescript
const amount = 1000000000000000000n; // 1 cUSD
const txHash = await sdk.approveCUSDCustom(amount);
console.log('Approval transaction hash:', txHash);
```